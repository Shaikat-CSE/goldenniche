<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		 <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->

		<title>Golden Niche BD</title>

		<!-- Favicon -->
		<link rel="icon" type="image/png" href="{% static 'img/favicon-32x32.png' %}">
		<link rel="shortcut icon" href="{% static 'img/favicon.ico' %}">

		<!-- Google font -->
		<link href="https://fonts.googleapis.com/css?family=Montserrat:400,500,700" rel="stylesheet">

		<!-- Bootstrap -->
		<link type="text/css" rel="stylesheet" href="css/bootstrap.min.css"/>

		<!-- Slick -->
		<link type="text/css" rel="stylesheet" href="css/slick.css"/>
		<link type="text/css" rel="stylesheet" href="css/slick-theme.css"/>

		<!-- nouislider -->
		<link type="text/css" rel="stylesheet" href="css/nouislider.min.css"/>

		<!-- Font Awesome Icon -->
		<link rel="stylesheet" href="css/font-awesome.min.css">

		<!-- Custom stlylesheet -->
		<link type="text/css" rel="stylesheet" href="css/style.css"/>

		<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
		<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
		<!--[if lt IE 9]>
		  <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
		  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
		<![endif]-->

    </head>
	<body>
		<!-- HEADER -->
		<header>
			<!-- TOP HEADER -->
			<div id="top-header">
				<div class="container">
					<ul class="header-links pull-left">
						<li><a href="#"><i class="fa fa-phone"></i> +021-95-51-84</a></li>
						<li><a href="#"><i class="fa fa-envelope-o"></i> email@goldennichebd.com</a></li>
						<li><a href="#"><i class="fa fa-map-marker"></i> Kazir Dewri Chattogram</a></li>
					</ul>
					<ul class="header-links pull-right">
						<li><a href="#"><i class="fa fa-money"></i> BDT</a></li>
						<li><a href="#"><i class="fa fa-user-o"></i> My Account</a></li>
					</ul>
				</div>
			</div>
			<!-- /TOP HEADER -->

			<!-- MAIN HEADER -->
			<div id="header">
				<!-- container -->
				<div class="container">
					<!-- row -->
					<div class="row" style="display: flex; align-items: center;">
						<!-- LOGO -->
						<div class="col-md-3">
							<div class="header-logo" style="padding: 15px 0;">
								<a href="#" class="logo">
									<img src="./img/logo.png" alt="" style="max-width: 100%; height: auto;">
								</a>
							</div>
						</div>
						<!-- /LOGO -->

						<!-- SEARCH BAR -->
						<div class="col-md-6">
							<div class="header-search">
								<form>
									<select class="input-select">
										<option value="0">All Categories</option>
										<option value="1">Category 01</option>
										<option value="1">Category 02</option>
									</select>
									<input class="input" placeholder="Search here">
									<button class="search-btn">Search</button>
								</form>
							</div>
						</div>
						<!-- /SEARCH BAR -->

						<!-- ACCOUNT -->
						<div class="col-md-3">
							<div class="header-ctn" style="display: flex; justify-content: flex-end;">
								<!-- Wishlist -->
								<div>
									<a href="#">
										<i class="fa fa-heart-o"></i>
										<span>Your Wishlist</span>
										<div class="qty">2</div>
									</a>
								</div>
								<!-- /Wishlist -->

								<!-- Cart -->
								<div class="dropdown">
									<a class="dropdown-toggle" data-toggle="dropdown" aria-expanded="true">
										<i class="fa fa-shopping-cart"></i>
										<span>Your Cart</span>
										<div class="qty">3</div>
									</a>
									<div class="cart-dropdown">
										<!-- ... cart dropdown content ... -->
									</div>
								</div>
								<!-- /Cart -->

								<!-- Menu Toogle -->
								<div class="menu-toggle">
									<a href="#">
										<i class="fa fa-bars"></i>
										<span>Menu</span>
									</a>
								</div>
								<!-- /Menu Toogle -->
							</div>
						</div>
						<!-- /ACCOUNT -->
					</div>
					<!-- /row -->
				</div>
				<!-- container -->
			</div>
			<!-- /MAIN HEADER -->
		</header>
		<!-- /HEADER -->

		<!-- NAVIGATION -->
		<nav id="navigation">
			<!-- container -->
			<div class="container">
				<!-- responsive-nav -->
				<div id="responsive-nav">
					<!-- NAV -->
					<ul class="main-nav nav navbar-nav">
						<li class="active"><a href="#">Home</a></li>
						<li><a href="#">Hot Deals</a></li>
						<li><a href="#">Categories</a></li>
						<li><a href="#">Retiqo Spices</a></li>
						<li><a href="#">Premium Fruits</a></li>
						<li><a href="#">Prestige Cookware</a></li>
						<li><a href="#">Home Decor</a></li>
					</ul>
					<!-- /NAV -->
				</div>
				<!-- /responsive-nav -->
			</div>
			<!-- /container -->
		</nav>
		<!-- /NAVIGATION -->

		<!-- SECTION -->
		<div class="section">
			<!-- container -->
			<div class="container">
				<!-- row -->
				<div class="row">
					<!-- ASIDE -->
					<div id="aside" class="col-md-3">
						<!-- aside Widget -->
						<div class="aside">
							<h3 class="aside-title">Categories</h3>
							<div class="checkbox-filter">
								{% for category in categories %}
								<div class="input-checkbox">
									<input type="checkbox" id="category-{{ category.id }}" name="category" value="{{ category.id }}" {% if selected_category == category.id %}checked{% endif %} class="filter-checkbox">
									<label for="category-{{ category.id }}">
										<span></span>
										{{ category.name }}
										<small>({{ category.products.count }})</small>
									</label>
								</div>
								{% endfor %}
							</div>
						</div>
						<!-- /aside Widget -->

						<!-- aside Widget -->
						<div class="aside">
							<h3 class="aside-title">Subcategories</h3>
							<div class="checkbox-filter">
								{% for subcategory in subcategories %}
								<div class="input-checkbox">
									<input type="checkbox" id="subcategory-{{ subcategory.id }}" name="subcategory" value="{{ subcategory.id }}" {% if selected_subcategory == subcategory.id %}checked{% endif %} class="filter-checkbox subcategory-checkbox" data-category-id="{{ subcategory.category.id }}">
									<label for="subcategory-{{ subcategory.id }}">
										<span></span>
										{{ subcategory.name }}
										<small>({{ subcategory.products.count }})</small>
									</label>
								</div>
								{% endfor %}
							</div>
						</div>
						<!-- /aside Widget -->

						<!-- aside Widget -->
						<div class="aside">
							<h3 class="aside-title">Price</h3>
							<div class="price-filter">
								<div id="price-slider"></div>
								<div class="input-number price-min">
									<input id="price-min" type="number" value="{{ min_price|default:'100' }}">
									<span class="qty-up">+</span>
									<span class="qty-down">-</span>
								</div>
								<span>-</span>
								<div class="input-number price-max">
									<input id="price-max" type="number" value="{{ max_price|default:'5000' }}">
									<span class="qty-up">+</span>
									<span class="qty-down">-</span>
								</div>
							</div>
						</div>
						<!-- /aside Widget -->

						<!-- aside Widget -->
						<div class="aside">
							<h3 class="aside-title">Filter By</h3>
							<div class="checkbox-filter">
								<div class="input-checkbox">
									<input type="checkbox" id="brand-1" class="filter-checkbox">
									<label for="brand-1">
										<span></span>
										On Sale
										<small>({{ products.filter(is_sale=True).count }})</small>
									</label>
								</div>
								<div class="input-checkbox">
									<input type="checkbox" id="brand-2" class="filter-checkbox">
									<label for="brand-2">
										<span></span>
										New Arrivals
										<small>({{ products.filter(is_new=True).count }})</small>
									</label>
								</div>
								<div class="input-checkbox">
									<input type="checkbox" id="brand-3" class="filter-checkbox">
									<label for="brand-3">
										<span></span>
										Featured
										<small>({{ products.filter(is_featured=True).count }})</small>
									</label>
								</div>
							</div>
						</div>
						<!-- /aside Widget -->

						<button id="ajax-filter" class="primary-btn">Apply Filters</button>
					</div>
					<!-- /ASIDE -->

					<!-- STORE -->
					<div id="store" class="col-md-9">
						<!-- store top filter -->
						<div class="store-filter clearfix">
							<div class="store-sort">
								<label>
									Sort By:
									<select class="input-select">
										<option value="0">Popular</option>
										<option value="1">Position</option>
									</select>
								</label>

								<label>
									Show:
									<select id="show-per-page" class="input-select">
										<option value="12" {% if show == '12' or not show %}selected{% endif %}>12</option>
										<option value="24" {% if show == '24' %}selected{% endif %}>24</option>
									</select>
								</label>
							</div>
							<ul class="store-grid">
								<li class="active"><i class="fa fa-th"></i></li>
								<li><a href="#"><i class="fa fa-th-list"></i></a></li>
							</ul>
						</div>
						<!-- /store top filter -->

						<!-- store products -->
						<div class="row" id="products-container" data-filter-applied="{% if filter_applied %}true{% else %}false{% endif %}">
							<!-- product -->
							<div class="col-md-4 col-xs-6">
								<div class="product">
									<div class="product-img">
										<img src="./img/product01.png" alt="">
										<div class="product-label">
											<span class="sale">-30%</span>
											<span class="new">NEW</span>
										</div>
									</div>
									<div class="product-body">
										<p class="product-category">Category</p>
										<h3 class="product-name"><a href="#">product name goes here</a></h3>
										<h4 class="product-price">$980.00 <del class="product-old-price">$990.00</del></h4>
										<div class="product-rating">
											<i class="fa fa-star"></i>
											<i class="fa fa-star"></i>
											<i class="fa fa-star"></i>
											<i class="fa fa-star"></i>
											<i class="fa fa-star"></i>
										</div>
										<div class="product-btns">
											<button class="add-to-wishlist"><i class="fa fa-heart-o"></i><span class="tooltipp">add to wishlist</span></button>
											<button class="add-to-compare"><i class="fa fa-exchange"></i><span class="tooltipp">add to compare</span></button>
											<button class="quick-view"><i class="fa fa-eye"></i><span class="tooltipp">quick view</span></button>
										</div>
									</div>
									<div class="add-to-cart">
										<button class="add-to-cart-btn"><i class="fa fa-shopping-cart"></i> add to cart</button>
									</div>
								</div>
							</div>
							<!-- /product -->

							<!-- product -->
							<div class="col-md-4 col-xs-6">
								<div class="product">
									<div class="product-img">
										<img src="./img/product02.png" alt="">
										<div class="product-label">
											<span class="new">NEW</span>
										</div>
									</div>
									<div class="product-body">
										<p class="product-category">Category</p>
										<h3 class="product-name"><a href="#">product name goes here</a></h3>
										<h4 class="product-price">$980.00 <del class="product-old-price">$990.00</del></h4>
										<div class="product-rating">
											<i class="fa fa-star"></i>
											<i class="fa fa-star"></i>
											<i class="fa fa-star"></i>
											<i class="fa fa-star"></i>
											<i class="fa fa-star-o"></i>
										</div>
										<div class="product-btns">
											<button class="add-to-wishlist"><i class="fa fa-heart-o"></i><span class="tooltipp">add to wishlist</span></button>
											<button class="add-to-compare"><i class="fa fa-exchange"></i><span class="tooltipp">add to compare</span></button>
											<button class="quick-view"><i class="fa fa-eye"></i><span class="tooltipp">quick view</span></button>
										</div>
									</div>
									<div class="add-to-cart">
										<button class="add-to-cart-btn"><i class="fa fa-shopping-cart"></i> add to cart</button>
									</div>
								</div>
							</div>
							<!-- /product -->

							<div class="clearfix visible-sm visible-xs"></div>

							<!-- product -->
							<div class="col-md-4 col-xs-6">
								<div class="product">
									<div class="product-img">
										<img src="./img/product03.png" alt="">
									</div>
									<div class="product-body">
										<p class="product-category">Category</p>
										<h3 class="product-name"><a href="#">product name goes here</a></h3>
										<h4 class="product-price">$980.00 <del class="product-old-price">$990.00</del></h4>
										<div class="product-rating">
										</div>
										<div class="product-btns">
											<button class="add-to-wishlist"><i class="fa fa-heart-o"></i><span class="tooltipp">add to wishlist</span></button>
											<button class="add-to-compare"><i class="fa fa-exchange"></i><span class="tooltipp">add to compare</span></button>
											<button class="quick-view"><i class="fa fa-eye"></i><span class="tooltipp">quick view</span></button>
										</div>
									</div>
									<div class="add-to-cart">
										<button class="add-to-cart-btn"><i class="fa fa-shopping-cart"></i> add to cart</button>
									</div>
								</div>
							</div>
							<!-- /product -->

							<div class="clearfix visible-lg visible-md"></div>

							<!-- product -->
							<div class="col-md-4 col-xs-6">
								<div class="product">
									<div class="product-img">
										<img src="./img/product04.png" alt="">
									</div>
									<div class="product-body">
										<p class="product-category">Category</p>
										<h3 class="product-name"><a href="#">product name goes here</a></h3>
										<h4 class="product-price">$980.00 <del class="product-old-price">$990.00</del></h4>
										<div class="product-rating">
										</div>
										<div class="product-btns">
											<button class="add-to-wishlist"><i class="fa fa-heart-o"></i><span class="tooltipp">add to wishlist</span></button>
											<button class="add-to-compare"><i class="fa fa-exchange"></i><span class="tooltipp">add to compare</span></button>
											<button class="quick-view"><i class="fa fa-eye"></i><span class="tooltipp">quick view</span></button>
										</div>
									</div>
									<div class="add-to-cart">
										<button class="add-to-cart-btn"><i class="fa fa-shopping-cart"></i> add to cart</button>
									</div>
								</div>
							</div>
							<!-- /product -->

							<div class="clearfix visible-sm visible-xs"></div>

							<!-- product -->
							<div class="col-md-4 col-xs-6">
								<div class="product">
									<div class="product-img">
										<img src="./img/product05.png" alt="">
									</div>
									<div class="product-body">
										<p class="product-category">Category</p>
										<h3 class="product-name"><a href="#">product name goes here</a></h3>
										<h4 class="product-price">$980.00 <del class="product-old-price">$990.00</del></h4>
										<div class="product-rating">
										</div>
										<div class="product-btns">
											<button class="add-to-wishlist"><i class="fa fa-heart-o"></i><span class="tooltipp">add to wishlist</span></button>
											<button class="add-to-compare"><i class="fa fa-exchange"></i><span class="tooltipp">add to compare</span></button>
											<button class="quick-view"><i class="fa fa-eye"></i><span class="tooltipp">quick view</span></button>
										</div>
									</div>
									<div class="add-to-cart">
										<button class="add-to-cart-btn"><i class="fa fa-shopping-cart"></i> add to cart</button>
									</div>
								</div>
							</div>
							<!-- /product -->

							<!-- product -->
							<div class="col-md-4 col-xs-6">
								<div class="product">
									<div class="product-img">
										<img src="./img/product06.png" alt="">
									</div>
									<div class="product-body">
										<p class="product-category">Category</p>
										<h3 class="product-name"><a href="#">product name goes here</a></h3>
										<h4 class="product-price">$980.00 <del class="product-old-price">$990.00</del></h4>
										<div class="product-rating">
											<i class="fa fa-star"></i>
											<i class="fa fa-star"></i>
											<i class="fa fa-star"></i>
											<i class="fa fa-star"></i>
											<i class="fa fa-star-o"></i>
										</div>
										<div class="product-btns">
											<button class="add-to-wishlist"><i class="fa fa-heart-o"></i><span class="tooltipp">add to wishlist</span></button>
											<button class="add-to-compare"><i class="fa fa-exchange"></i><span class="tooltipp">add to compare</span></button>
											<button class="quick-view"><i class="fa fa-eye"></i><span class="tooltipp">quick view</span></button>
										</div>
									</div>
									<div class="add-to-cart">
										<button class="add-to-cart-btn"><i class="fa fa-shopping-cart"></i> add to cart</button>
									</div>
								</div>
							</div>
							<!-- /product -->

							<div class="clearfix visible-lg visible-md visible-sm visible-xs"></div>

							<!-- product -->
							<div class="col-md-4 col-xs-6">
								<div class="product">
									<div class="product-img">
										<img src="./img/product07.png" alt="">
									</div>
									<div class="product-body">
										<p class="product-category">Category</p>
										<h3 class="product-name"><a href="#">product name goes here</a></h3>
										<h4 class="product-price">$980.00 <del class="product-old-price">$990.00</del></h4>
										<div class="product-rating">
											<i class="fa fa-star"></i>
											<i class="fa fa-star"></i>
											<i class="fa fa-star"></i>
											<i class="fa fa-star"></i>
											<i class="fa fa-star"></i>
										</div>
										<div class="product-btns">
											<button class="add-to-wishlist"><i class="fa fa-heart-o"></i><span class="tooltipp">add to wishlist</span></button>
											<button class="add-to-compare"><i class="fa fa-exchange"></i><span class="tooltipp">add to compare</span></button>
											<button class="quick-view"><i class="fa fa-eye"></i><span class="tooltipp">quick view</span></button>
										</div>
									</div>
									<div class="add-to-cart">
										<button class="add-to-cart-btn"><i class="fa fa-shopping-cart"></i> add to cart</button>
									</div>
								</div>
							</div>
							<!-- /product -->

							<!-- product -->
							<div class="col-md-4 col-xs-6">
								<div class="product">
									<div class="product-img">
										<img src="./img/product08.png" alt="">
									</div>
									<div class="product-body">
										<p class="product-category">Category</p>
										<h3 class="product-name"><a href="#">product name goes here</a></h3>
										<h4 class="product-price">$980.00 <del class="product-old-price">$990.00</del></h4>
										<div class="product-rating">
										</div>
										<div class="product-btns">
											<button class="add-to-wishlist"><i class="fa fa-heart-o"></i><span class="tooltipp">add to wishlist</span></button>
											<button class="add-to-compare"><i class="fa fa-exchange"></i><span class="tooltipp">add to compare</span></button>
											<button class="quick-view"><i class="fa fa-eye"></i><span class="tooltipp">quick view</span></button>
										</div>
									</div>
									<div class="add-to-cart">
										<button class="add-to-cart-btn"><i class="fa fa-shopping-cart"></i> add to cart</button>
									</div>
								</div>
							</div>
							<!-- /product -->

							<div class="clearfix visible-sm visible-xs"></div>

							<!-- product -->
							<div class="col-md-4 col-xs-6">
								<div class="product">
									<div class="product-img">
										<img src="./img/product09.png" alt="">
									</div>
									<div class="product-body">
										<p class="product-category">Category</p>
										<h3 class="product-name"><a href="#">product name goes here</a></h3>
										<h4 class="product-price">$980.00 <del class="product-old-price">$990.00</del></h4>
										<div class="product-rating">
										</div>
										<div class="product-btns">
											<button class="add-to-wishlist"><i class="fa fa-heart-o"></i><span class="tooltipp">add to wishlist</span></button>
											<button class="add-to-compare"><i class="fa fa-exchange"></i><span class="tooltipp">add to compare</span></button>
											<button class="quick-view"><i class="fa fa-eye"></i><span class="tooltipp">quick view</span></button>
										</div>
									</div>
									<div class="add-to-cart">
										<button class="add-to-cart-btn"><i class="fa fa-shopping-cart"></i> add to cart</button>
									</div>
								</div>
							</div>
							<!-- /product -->
						</div>
						<!-- /store products -->

						<!-- store bottom filter -->
						<div class="store-filter clearfix">
							<span class="store-qty">Showing 20-100 products</span>
							<ul class="store-pagination">
								<li class="active">1</li>
								<li><a href="#">2</a></li>
								<li><a href="#">3</a></li>
								<li><a href="#">4</a></li>
								<li><a href="#"><i class="fa fa-angle-right"></i></a></li>
							</ul>
						</div>
						<!-- /store bottom filter -->
					</div>
					<!-- /STORE -->
				</div>
				<!-- /row -->
			</div>
			<!-- /container -->
		</div>
		<!-- /SECTION -->

		<!-- NEWSLETTER -->
		<div id="newsletter" class="section">
			<!-- container -->
			<div class="container">
				<!-- row -->
				<div class="row">
					<div class="col-md-12">
						<div class="newsletter">
							<p>Sign Up for the <strong>NEWSLETTER</strong></p>
							<form>
								<input class="input" type="email" placeholder="Enter Your Email">
								<button class="newsletter-btn"><i class="fa fa-envelope"></i> Subscribe</button>
							</form>
							<ul class="newsletter-follow">
								<li>
									<a href="#"><i class="fa fa-facebook"></i></a>
								</li>
								<li>
									<a href="#"><i class="fa fa-twitter"></i></a>
								</li>
								<li>
									<a href="#"><i class="fa fa-instagram"></i></a>
								</li>
								<li>
									<a href="#"><i class="fa fa-pinterest"></i></a>
								</li>
							</ul>
						</div>
					</div>
				</div>
				<!-- /row -->
			</div>
			<!-- /container -->
		</div>
		<!-- /NEWSLETTER -->

		<!-- FOOTER -->
		<footer id="footer">
			<!-- top footer -->
			<div class="section">
				<!-- container -->
				<div class="container">
					<!-- row -->
					<div class="row">
						<div class="col-md-3 col-xs-6">
							<div class="footer">
								<h3 class="footer-title">Service</h3>
								<ul class="footer-links">
									<li><a href="#">My Account</a></li>
									<li><a href="#">View Cart</a></li>
									<li><a href="#">Wishlist</a></li>
									<li><a href="#">Track My Order</a></li>
									<li><a href="#">Help</a></li>
								</ul>
							</div>
						</div>
						<div class="col-md-3 col-xs-6">
							<div class="footer">
								<h3 class="footer-title">About Us</h3>
								<p>Golden Niche BD is your premier destination for premium cookware, exotic fruits, authentic spices, and elegant home decor.</p>
								<ul class="footer-links">
									<li><a href="#"><i class="fa fa-map-marker"></i>Kazir Dewri Chattogram</a></li>
									<li><a href="#"><i class="fa fa-phone"></i>+021-95-51-84</a></li>
									<li><a href="#"><i class="fa fa-envelope-o"></i>email@goldennichebd.com</a></li>
								</ul>
							</div>
						</div>
						<div class="col-md-3 col-xs-6">
							<div class="footer">
								<h3 class="footer-title">Categories</h3>
								<ul class="footer-links">
									<li><a href="retiqospices.html">Retiqo Spices</a></li>
									<li><a href="premiumfruits.html">Premium Fruits</a></li>
									<li><a href="prestigecookware.html">Prestige Cookware</a></li>
									<li><a href="homedecor.html">Home Decor</a></li>
								</ul>
							</div>
						</div>
						<div class="col-md-3 col-xs-6">
							<div class="footer">
								<h3 class="footer-title">Information</h3>
								<ul class="footer-links">
									<li><a href="#">About Us</a></li>
									<li><a href="#">Contact Us</a></li>
									<li><a href="#">Privacy Policy</a></li>
									<li><a href="#">Orders and Returns</a></li>
									<li><a href="#">Terms & Conditions</a></li>
								</ul>
							</div>
						</div>
					</div>
					<!-- /row -->
				</div>
				<!-- /container -->
			</div>
			<!-- /top footer -->

			<!-- bottom footer -->
			<div id="bottom-footer" class="section">
				<div class="container">
					<!-- row -->
					<div class="row">
						<div class="col-md-12 text-center">
							<ul class="footer-payments">
								<li><a href="#"><i class="fa fa-cc-visa"></i></a></li>
								<li><a href="#"><i class="fa fa-credit-card"></i></a></li>
								<li><a href="#"><i class="fa fa-cc-paypal"></i></a></li>
								<li><a href="#"><i class="fa fa-cc-mastercard"></i></a></li>
							</ul>
						</div>
					</div>
					<!-- /row -->
				</div>
				<!-- /container -->
			</div>
			<!-- /top footer -->
		</footer>
		<!-- /FOOTER -->

		<!-- jQuery Plugins -->
		<script src="js/jquery.min.js"></script>
		<script src="js/bootstrap.min.js"></script>
		<script src="js/slick.min.js"></script>
		<script src="js/nouislider.min.js"></script>
		<script src="js/jquery.zoom.min.js"></script>
		<script src="js/main.js"></script>

		<script>
			$(document).ready(function() {
				// Initialize price slider
				var priceSlider = document.getElementById('price-slider');
				noUiSlider.create(priceSlider, {
					start: [parseInt($('#price-min').val()), parseInt($('#price-max').val())],
					connect: true,
					step: 10,
					range: {
						'min': 0,
						'max': 10000
					}
				});

				// Update min and max input fields when slider changes
				priceSlider.noUiSlider.on('update', function(values, handle) {
					var value = Math.round(values[handle]);
					
					if (handle) {
						$('#price-max').val(value);
					} else {
						$('#price-min').val(value);
					}
				});

				// Update slider when inputs change
				$('#price-min').on('change', function() {
					priceSlider.noUiSlider.set([this.value, null]);
				});

				$('#price-max').on('change', function() {
					priceSlider.noUiSlider.set([null, this.value]);
				});

				// Handle category change to load subcategories
				$('.filter-checkbox[name="category"]').on('change', function() {
					updateSubcategories();
				});

				// Update subcategories based on selected categories
				function updateSubcategories() {
					// Get all checked category checkboxes
					var selectedCategories = [];
					$('.filter-checkbox[name="category"]:checked').each(function() {
						selectedCategories.push($(this).val());
					});
					
					// Show/hide subcategories
					if (selectedCategories.length > 0) {
						$('.subcategory-checkbox').each(function() {
							var subcategoryElement = $(this);
							var subcategoryParent = subcategoryElement.parent();
							
							// Get category ID for this subcategory using data attribute
							var categoryId = subcategoryElement.data('category-id');
							
							// If category is selected, show subcategory; otherwise hide it
							if (selectedCategories.includes(categoryId.toString())) {
								subcategoryParent.show();
							} else {
								subcategoryParent.hide();
								subcategoryElement.prop('checked', false);
							}
						});
					} else {
						// If no categories selected, show all subcategories
						$('.subcategory-checkbox').parent().show();
					}
				}

				// Handle the filter button click
				$('#ajax-filter').on('click', function() {
					loadFilteredProducts();
				});

				// Load products based on current filters
				function loadFilteredProducts(page = 1) {
					// Show loading indicator
					$('#products-container').html('<div class="text-center"><i class="fa fa-spinner fa-spin" style="font-size: 48px; margin: 20px 0;"></i></div>');
					
					// Get all selected categories
					var selectedCategories = [];
					$('.filter-checkbox[name="category"]:checked').each(function() {
						selectedCategories.push($(this).val());
					});
					
					// Get all selected subcategories
					var selectedSubcategories = [];
					$('.filter-checkbox[name="subcategory"]:checked').each(function() {
						selectedSubcategories.push($(this).val());
					});
					
					// Get price range
					var minPrice = $('#price-min').val();
					var maxPrice = $('#price-max').val();
					
					// Get sort option
					var sortBy = $('#sort-by').val();
					
					// Get product_type if available
					var productType = $('input[name="product_type"]').val();
					
					// Perform AJAX request
					$.ajax({
						url: '{% url "ajax_filter_products" %}',
						data: {
							'categories[]': selectedCategories,
							'subcategories[]': selectedSubcategories,
							'min_price': minPrice,
							'max_price': maxPrice,
							'sort_by': sortBy,
							'product_type': productType,
							'page': page
						},
						type: 'GET',
						dataType: 'json',
						success: function(data) {
							// Update products
							$('#products-container').html(data.products_html);
							
							// Update pagination
							$('#pagination-container').html(data.pagination_html);
							
							// Update product count
							$('#product-count').html(data.product_count);
							
							// Bind pagination click handler
							$('.pagination-link').off('click').on('click', function() {
								var page = $(this).data('page');
								loadFilteredProducts(page);
								
								// Scroll to top of products
								$('html, body').animate({
									scrollTop: $("#products-container").offset().top - 100
								}, 500);
								
								return false;
							});
							
							// Re-initialize add to cart and wishlist buttons
							initAddToCartButtons();
							initAddToWishlistButtons();
						},
						error: function(xhr, status, error) {
							console.error("Error loading products:", error);
							$('#products-container').html('<div class="alert alert-danger">Error loading products. Please try again.</div>');
						}
					});
				}

				// Initial load if needed
				if (document.getElementById('products-container').getAttribute('data-filter-applied') === 'true') {
					loadFilteredProducts();
				}
				
				// Handle pagination click
				$(document).on('click', '.pagination-link', function() {
					var page = $(this).data('page');
					loadFilteredProducts(page);
					return false;
				});
				
				// Sort by change handler
				$('#sort-by').on('change', function() {
					loadFilteredProducts();
				});
				
				// Initialize add to cart buttons
				function initAddToCartButtons() {
					$('.add-to-cart-btn').on('click', function() {
						var productId = $(this).data('product-id');
						addToCart(productId);
					});
				}
				
				// Initialize add to wishlist buttons
				function initAddToWishlistButtons() {
					$('.add-to-wishlist').on('click', function() {
						var productId = $(this).data('product-id');
						addToWishlist(productId);
					});
				}
				
				// Add to cart function
				function addToCart(productId) {
					$.ajax({
						url: '{% url "add_to_cart" 0 %}'.replace('0', productId),
						type: 'GET',
						success: function(data) {
							if (data.status === 'success') {
								$('.cart-qty').text(data.cart_count);
								alert(data.message);
							}
						},
						error: function() {
							alert('Error adding product to cart.');
						}
					});
				}
				
				// Add to wishlist function
				function addToWishlist(productId) {
					$.ajax({
						url: '{% url "add_to_wishlist" 0 %}'.replace('0', productId),
						type: 'GET',
						success: function(data) {
							if (data.status === 'success') {
								$('.wishlist-qty').text(data.wishlist_count);
								
								// Change button appearance
								var button = $('.add-to-wishlist[data-product-id="' + productId + '"]');
								button.find('i').removeClass('fa-heart-o').addClass('fa-heart');
								button.find('.tooltipp').text('added to wishlist');
								
								alert(data.message);
							}
						},
						error: function() {
							alert('Error adding product to wishlist.');
						}
					});
				}
				
				// Initialize buttons on page load
				initAddToCartButtons();
				initAddToWishlistButtons();
			});
		</script>

	</body>
</html>
